import tensorflow as tf
import tensorflow.contrib.slim as slim
import numpy as np
import gym
import random
from PoleChromosome import PoleChromosome
from gen.ThreadAgent import ThreadAgent
from multiprocessing.pool import ThreadPool

import matplotlib
matplotlib.use('TkAgg')
import matplotlib.pyplot as plt

def GA_missing_example():
    new_data_with_half_improvement = [0.4666666666666667, 0.3333333333333333, 0.43333333333333335, 0.4, 0.5, 0.4, 0.3,
                                      0.43333333333333335, 0.3333333333333333, 0.3, 0.4, 0.2, 0.3333333333333333,
                                      0.3333333333333333, 0.1, 0.2, 0.3333333333333333, 0.3333333333333333,
                                      0.3333333333333333, 0.16666666666666666, 0.26666666666666666, 0.3333333333333333,
                                      0.4, 0.23333333333333334, 0.26666666666666666, 0.43333333333333335,
                                      0.26666666666666666, 0.2, 0.4666666666666667, 0.16666666666666666,
                                      0.26666666666666666, 0.2, 0.4666666666666667, 0.36666666666666664,
                                      0.23333333333333334, 0.43333333333333335, 0.26666666666666666,
                                      0.36666666666666664, 0.4, 0.3333333333333333, 0.26666666666666666]

    fig, ax = plt.subplots()
    ax.plot(new_data_with_half_improvement[1:32], 'k', label='[0.5, 0.5] probabilities')
    ax.set_xlabel('Generation')
    ax.set_ylabel('Improvement Rate')
    plt.show()


def NN_with_L1_loss(ax, format, label, graphType):
    transformation_prob = [0.73749256,  0.26250735, 0.78343362,  0.21656635, 0.76176947,  0.2382306 , 0.77150112,  0.22849874, 0.78487074,  0.21512915, 0.82485312,  0.17514695, 0.84269935,  0.1573007 , 0.83218193,  0.16781816, 0.81459057,  0.18540946, 0.79515529,  0.20484476, 0.7804631 ,  0.21953699, 0.75692749,  0.24307254, 0.73140508,  0.2685948 , 0.71117836,  0.28882167, 0.67385358,  0.32614642, 0.59218287,  0.40781727, 0.61673838,  0.38326165, 0.60201812,  0.39798194, 0.52914488,  0.47085518, 0.50695199,  0.49304798, 0.51160651,  0.48839343, 0.5057376,  0.4942624, 0.47880259,  0.52119744, 0.47723019,  0.52276981, 0.47740164,  0.52259839, 0.46369714,  0.53630286, 0.43447545,  0.5655244 , 0.43928137,  0.5607186 , 0.43132421,  0.56867576, 0.4022612 ,  0.59773868, 0.39407456,  0.60592544, 0.38338035,  0.61661971, 0.36408153,  0.6359185 , 0.36046416,  0.63953584, 0.35148159,  0.64851838, 0.3405368 ,  0.65946311, 0.30820161,  0.69179833, 0.3177413 ,  0.68225867, 0.32243702,  0.67756301, 0.32835442,  0.67164558, 0.28620905,  0.71379089, 0.27962276,  0.72037721, 0.26697406,  0.73302609, 0.26838508,  0.73161501, 0.2904695 ,  0.70953047, 0.30254948,  0.69745058, 0.33661801,  0.66338193, 0.35729522,  0.64270473, 0.36279306,  0.63720697, 0.36346051,  0.63653946, 0.33884233,  0.66115773, 0.32297984,  0.67702019, 0.30473369,  0.69526631]
    res = [45.362499999999997, 56.8125, 69.305000000000007, 75.177500000000009, 84.91749999999999, 95.585000000000008, 115.14749999999999, 125.53999999999999, 125.69500000000001, 138.34499999999997, 143.82499999999999, 147.40499999999997, 145.74250000000001, 148.61000000000001, 155.66249999999999, 158.29749999999999, 164.18000000000001, 172.70499999999998, 171.83000000000001, 167.94750000000002, 171.32249999999999, 173.07749999999999, 170.73250000000002, 177.45750000000004, 174.78250000000003, 175.24250000000001, 176.7825, 182.39000000000001, 181.66999999999999, 183.19499999999999, 185.82249999999999, 185.03249999999997, 182.38500000000002, 184.73000000000002, 181.55250000000001, 184.9075, 188.42999999999998, 184.03, 184.32999999999998, 185.48000000000002, 186.55250000000001, 186.03249999999997, 187.73750000000001, 191.095, 191.05500000000001, 195.315, 195.10249999999999, 198.4025, 197.47000000000003, 198.42750000000001, 198.97750000000002, 199.38749999999999, 198.995]
    print len(res)
    improvement = [0.5, 0.40000000000000002, 0.29999999999999999, 0.33333333333333331, 0.40000000000000002, 0.13333333333333333, 0.53333333333333333, 0.23333333333333334, 0.36666666666666664, 0.33333333333333331, 0.29999999999999999, 0.33333333333333331, 0.33333333333333331, 0.20000000000000001, 0.16666666666666666, 0.29999999999999999, 0.23333333333333334, 0.23333333333333334, 0.33333333333333331, 0.29999999999999999, 0.26666666666666666, 0.33333333333333331, 0.26666666666666666, 0.23333333333333334, 0.16666666666666666, 0.29999999999999999, 0.33333333333333331, 0.43333333333333335, 0.36666666666666664, 0.20000000000000001, 0.36666666666666664, 0.36666666666666664, 0.59999999999999998, 0.26666666666666666, 0.40000000000000002, 0.43333333333333335, 0.26666666666666666, 0.29999999999999999, 0.23333333333333334, 0.23333333333333334, 0.36666666666666664, 0.46666666666666667, 0.46666666666666667, 0.40000000000000002, 0.33333333333333331, 0.46666666666666667, 0.36666666666666664, 0.33333333333333331, 0.23333333333333334, 0.33333333333333331, 0.36666666666666664, 0.23333333333333334, 0.16666666666666666]
    print np.array(improvement).mean(0)
    if graphType == 0:
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp)/2, 2]))
        ax.plot(trpt[0,0:51], ':', label=label+'-mutation-prob')
        ax.plot(trpt[1,0:51], 'o', label=label+'-crossover-prob')
    elif graphType == 1:
        ax.plot(res[0:51], format, label=label)
    else:
        ax.plot(improvement, format, label=label)

def NN_with_MSE_loss(ax, format, label, graphType):
    transformation_prob = [ 0.20719905,  0.79280102,  0.22497463,  0.77502543,  0.23871225,
        0.76128781,  0.34937337,  0.65062672,  0.26361236,  0.73638761,
        0.2760537 ,  0.72394639,  0.30458269,  0.69541734,  0.31312332,
        0.68687683,  0.3583658 ,  0.64163423,  0.38946316,  0.61053681,
        0.44622877,  0.5537712 ,  0.43838787,  0.56161219,  0.43024334,
        0.56975669,  0.38149196,  0.61850804,  0.33451259,  0.66548741,
        0.38715926,  0.61284077,  0.39108771,  0.60891229,  0.39068806,
        0.60931194,  0.43796843,  0.56203157,  0.42054424,  0.57945573,
        0.39508894,  0.60491103,  0.3798396 ,  0.62016028,  0.35878143,
        0.64121854,  0.38806733,  0.61193264,  0.37972715,  0.62027282,
        0.4193702 ,  0.58062989,  0.38613564,  0.61386436,  0.36640385,
        0.63359624,  0.34613335,  0.65386659,  0.39029393,  0.60970616,
        0.39795038,  0.60204953,  0.39202896,  0.60797095,  0.37538135,
        0.62461865,  0.34323841,  0.65676147,  0.35679907,  0.64320099,
        0.3419278 ,  0.65807223,  0.33633533,  0.66366458,  0.32050201,
        0.67949784,  0.32813862,  0.67186159,  0.34624276,  0.65375715,
        0.33303738,  0.66696256,  0.32816812,  0.67183191,  0.33190268,
        0.66809738,  0.32332897,  0.67667097,  0.32731664,  0.67268342,
        0.35373834,  0.64626163,  0.33267027,  0.66732967,  0.36227274,
        0.6377272 ,  0.35966176,  0.64033824,  0.38851279,  0.61148709,
        0.36831489,  0.63168508,  0.33756986,  0.66243005,  0.3797498 ,
        0.62025005,  0.38244808,  0.61755198,  0.38239187,  0.61760801,
        0.37774736,  0.6222527 ,  0.36050084,  0.63949901,  0.3344759 ,
        0.66552413,  0.34183297,  0.65816694,  0.34518489,  0.65481526,
        0.38443539,  0.61556458,  0.35668486,  0.6433152 ,  0.33604506,
        0.66395497,  0.32095954,  0.67904049,  0.31590393,  0.6840961 ,
        0.31874818,  0.68125176,  0.32894102,  0.67105895,  0.32027248,
        0.67972744,  0.32228404,  0.67771602,  0.31963825,  0.68036187,
        0.34705731,  0.65294266,  0.3465699 ,  0.6534301 ]
    res = [30, 61.029999999999987, 73.672499999999999, 97.254999999999995, 107.4675, 116.88250000000001, 133.47999999999999, 149.15000000000001, 149.4975, 153.63500000000002, 157.8725, 159.80500000000001, 162.1825, 167.40000000000001, 169.22499999999999, 167.28, 170.20250000000001, 169.97499999999999, 169.08000000000001, 165.95750000000001, 167.39249999999998, 169.45750000000001, 168.02249999999998, 172.35750000000002, 171.17499999999998, 174.08499999999998, 175.92749999999998, 173.51500000000001, 177.5675, 179.75500000000002, 178.41000000000003, 179.65500000000003, 180.72499999999999, 179.845, 180.30500000000001, 182.30500000000001, 182.73750000000001, 182.31250000000003, 184.255, 186.64250000000001, 185.64999999999998, 183.89499999999998, 186.32250000000002, 184.52500000000001, 185.005, 186.75749999999999, 182.42249999999999, 186.9675, 186.39749999999998, 184.2175, 181.54249999999999, 184.82999999999998, 185.48250000000002, 186.58750000000003, 186.99499999999998, 186.16750000000002, 180.43000000000001, 184.99250000000001, 185.50749999999999, 186.3725, 183.7175, 186.57249999999999, 186.27999999999997, 187.55500000000001, 188.4725, 187.76499999999999, 187.61499999999998, 186.91999999999999, 187.13999999999999, 187.99999999999997, 186.9675, 189.60750000000002, 189.72999999999999]
    print len(res)
    improvement = [0.56666666666666665, 0.33333333333333331, 0.53333333333333333, 0.13333333333333333, 0.36666666666666664, 0.23333333333333334, 0.40000000000000002, 0.33333333333333331, 0.33333333333333331, 0.46666666666666667, 0.20000000000000001, 0.29999999999999999, 0.26666666666666666, 0.33333333333333331, 0.56666666666666665, 0.46666666666666667, 0.40000000000000002, 0.33333333333333331, 0.23333333333333334, 0.29999999999999999, 0.36666666666666664, 0.29999999999999999, 0.36666666666666664, 0.33333333333333331, 0.36666666666666664, 0.40000000000000002, 0.16666666666666666, 0.43333333333333335, 0.20000000000000001, 0.43333333333333335, 0.46666666666666667, 0.36666666666666664, 0.40000000000000002, 0.40000000000000002, 0.29999999999999999, 0.40000000000000002, 0.53333333333333333, 0.29999999999999999, 0.56666666666666665, 0.33333333333333331, 0.23333333333333334, 0.46666666666666667, 0.33333333333333331, 0.5, 0.46666666666666667, 0.29999999999999999, 0.36666666666666664, 0.40000000000000002, 0.53333333333333333, 0.10000000000000001, 0.46666666666666667, 0.23333333333333334, 0.40000000000000002, 0.43333333333333335, 0.40000000000000002, 0.40000000000000002, 0.33333333333333331, 0.33333333333333331, 0.16666666666666666, 0.26666666666666666, 0.33333333333333331, 0.33333333333333331, 0.36666666666666664, 0.26666666666666666, 0.46666666666666667, 0.36666666666666664, 0.36666666666666664, 0.36666666666666664, 0.53333333333333333, 0.40000000000000002, 0.43333333333333335, 0.16666666666666666]
    print np.array(improvement).mean(0)
    if graphType == 0:
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp)/2, 2]))
        ax.plot(trpt[0,0:51], '--', label=label+'-mutation-prob')
        ax.plot(trpt[1,0:51], '-.', label=label+'-crossover-prob')
    elif graphType == 1:
        ax.plot(res[0:51], format, label=label)
    else:
        ax.plot(improvement, format, label=label)

def NN_with_ln_loss(ax, format, label, graphType):
    transformation_prob = [ 0.37527093,  0.62472904,  0.30408236,  0.69591767,  0.32293192,
        0.67706805,  0.30399767,  0.69600236,  0.40110236,  0.5988977 ,
        0.3397187 ,  0.6602813 ,  0.3958129 ,  0.60418713,  0.38756612,
        0.61243385,  0.43736967,  0.5626303 ,  0.34733614,  0.65266401,
        0.3649964 ,  0.63500363,  0.32622325,  0.67377675,  0.37304637,
        0.62695366,  0.40185153,  0.59814847,  0.40662134,  0.59337872,
        0.4066281 ,  0.59337193,  0.40233061,  0.5976693 ,  0.34035638,
        0.65964359,  0.3069219 ,  0.6930781 ,  0.27122205,  0.72877795,
        0.23214157,  0.76785833,  0.19914779,  0.80085224,  0.2168179 ,
        0.78318214,  0.20001331,  0.79998666,  0.21620949,  0.78379065,
        0.23386997,  0.76613003,  0.24385436,  0.75614566,  0.23392792,
        0.76607198,  0.20596287,  0.79403704,  0.24596153,  0.75403851,
        0.21740347,  0.78259653,  0.2171765 ,  0.78282338,  0.22505344,
        0.77494645,  0.22324821,  0.77675176,  0.20470086,  0.79529929,
        0.21847746,  0.78152251,  0.21879274,  0.7812072 ,  0.20624764,
        0.79375231,  0.21465212,  0.78534794,  0.22783789,  0.77216214,
        0.24345642,  0.75654352,  0.23273925,  0.76726073,  0.22039978,
        0.77960014,  0.21567659,  0.78432333,  0.22688107,  0.77311891,
        0.22771534,  0.77228469,  0.21811579,  0.78188419,  0.21372519,
        0.78627479,  0.20633049,  0.79366958,  0.21832606,  0.78167403,
        0.21611042,  0.78388953,  0.21322912,  0.78677076,  0.20442745,
        0.79557264,  0.20825273,  0.79174721,  0.20670706,  0.793293  ,
        0.20554124,  0.79445875,  0.21363486,  0.78636515,  0.20699449,
        0.79300565,  0.19611068,  0.80388927]
    res = [30, 56.237499999999997, 66.807500000000005, 87.237499999999997, 90.892500000000013, 97.004999999999995, 104.5325, 105.50250000000001, 109.47499999999999, 115.72999999999999, 125.41749999999999, 126.32750000000001, 133.91499999999999, 129.50749999999999, 131.23499999999999, 132.97499999999999, 133.435, 134.41999999999999, 134.78000000000003, 135.28, 138.75500000000002, 141.82499999999999, 144.7475, 147.92750000000001, 148.67249999999999, 147.315, 145.67750000000001, 145.97, 149.2825, 148.33499999999998, 147.8425, 148.35999999999999, 147.8175, 151.06249999999997, 147.80500000000001, 151.20500000000001, 150.5325, 150.08499999999998, 150.14749999999998, 151.96000000000001, 151.33000000000001, 150.50749999999999, 153.1225, 151.82250000000002, 153.95249999999999, 153.3725, 151.05749999999998, 149.04999999999998, 153.04749999999999, 152.10499999999999, 153.38500000000002, 153.30250000000001, 152.16500000000002, 153.75, 151.72999999999999, 152.31, 153.82749999999999, 153.5275, 153.29000000000002, 153.20999999999998]
    print len(res)
    improvement = [0.29999999999999999, 0.33333333333333331, 0.33333333333333331, 0.33333333333333331, 0.40000000000000002, 0.36666666666666664, 0.26666666666666666, 0.56666666666666665, 0.36666666666666664, 0.53333333333333333, 0.6333333333333333, 0.53333333333333333, 0.29999999999999999, 0.33333333333333331, 0.29999999999999999, 0.40000000000000002, 0.5, 0.43333333333333335, 0.5, 0.46666666666666667, 0.46666666666666667, 0.33333333333333331, 0.33333333333333331, 0.26666666666666666, 0.53333333333333333, 0.5, 0.33333333333333331, 0.5, 0.46666666666666667, 0.36666666666666664, 0.26666666666666666, 0.20000000000000001, 0.40000000000000002, 0.53333333333333333, 0.46666666666666667, 0.26666666666666666, 0.59999999999999998, 0.46666666666666667, 0.46666666666666667, 0.33333333333333331, 0.40000000000000002, 0.29999999999999999, 0.56666666666666665, 0.36666666666666664, 0.43333333333333335, 0.29999999999999999, 0.6333333333333333, 0.36666666666666664, 0.59999999999999998, 0.56666666666666665, 0.23333333333333334, 0.40000000000000002, 0.43333333333333335, 0.36666666666666664, 0.46666666666666667, 0.26666666666666666, 0.26666666666666666, 0.40000000000000002, 0.43333333333333335]
    print np.array(improvement).mean(0)
    if graphType == 0:
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp)/2, 2]))
        ax.plot(trpt[0,0:51], '^', label=label+'-mutation-prob')
        ax.plot(trpt[1,0:51], 's', label=label+'-crossover-prob')
    elif graphType == 1:
        ax.plot(res[0:51], format, label=label)
    else:
        ax.plot(improvement, format, label=label)

def GA_50_50_prob(ax, format, label, graphType):
    res = [30, 45.8825, 63.077500000000008, 71.747499999999988, 76.817499999999995, 84.340000000000003, 88.200000000000003, 88.959999999999994, 96.287499999999994, 106.16749999999999, 105.10500000000002, 116.69000000000001, 126.0125, 131.87499999999997, 133.85249999999999, 135.06, 140.23499999999999, 144.65249999999997, 140.08499999999998, 140.14000000000001, 135.77500000000003, 144.22, 145.2175, 147.23750000000001, 145.49250000000001, 149.75999999999999, 150.08250000000001, 148.33750000000001, 146.3725, 149.29500000000002, 151.10250000000002, 154.41250000000002, 155.77250000000001, 158.6525, 160.65749999999997, 159.41749999999999, 159.91500000000002, 156.44999999999999, 164.6925, 167.05500000000001, 172.41749999999999, 173.63249999999999, 177.81, 181.46499999999997, 182.14249999999998, 185.92000000000002, 183.48999999999998, 188.625, 186.81999999999999, 190.39499999999998, 189.22499999999997, 193.65499999999997, 190.32749999999996, 191.31999999999999, 191.66499999999996, 194.39000000000001, 195.61499999999998, 193.47750000000002, 192.72750000000002, 194.21999999999997, 193.67249999999999, 195.9375, 195.97999999999999, 194.88, 192.41000000000003, 195.08499999999998, 195.66749999999999, 194.73750000000001, 196.66499999999999, 196.18749999999997, 196.72499999999999, 196.26249999999999, 197.60750000000002, 195.16750000000002, 197.46250000000001, 195.16749999999999, 197.29499999999999, 195.17749999999998, 195.785, 195.035, 197.04749999999999, 195.08249999999998, 196.18750000000003, 196.83000000000001, 197.04000000000002]
    print len(res)
    improvement = [0.43333333333333335, 0.43333333333333335, 0.3333333333333333, 0.36666666666666664, 0.36666666666666664, 0.26666666666666666, 0.3333333333333333, 0.4, 0.3333333333333333, 0.3, 0.4, 0.4666666666666667, 0.3, 0.3333333333333333, 0.36666666666666664, 0.2, 0.4, 0.5, 0.16666666666666666, 0.13333333333333333, 0.6333333333333333, 0.3333333333333333, 0.23333333333333334, 0.2, 0.5, 0.3333333333333333, 0.4666666666666667, 0.26666666666666666, 0.3333333333333333, 0.3, 0.43333333333333335, 0.23333333333333334, 0.2, 0.3333333333333333, 0.3333333333333333, 0.3333333333333333, 0.43333333333333335, 0.23333333333333334, 0.4, 0.36666666666666664, 0.36666666666666664, 0.36666666666666664, 0.26666666666666666, 0.43333333333333335, 0.26666666666666666, 0.2, 0.4, 0.23333333333333334, 0.5666666666666667, 0.43333333333333335, 0.3, 0.26666666666666666, 0.43333333333333335, 0.2, 0.13333333333333333, 0.43333333333333335, 0.3, 0.3, 0.2, 0.3333333333333333, 0.23333333333333334, 0.36666666666666664, 0.36666666666666664, 0.16666666666666666, 0.1, 0.3, 0.23333333333333334, 0.16666666666666666, 0.3333333333333333, 0.16666666666666666, 0.3333333333333333, 0.36666666666666664, 0.16666666666666666, 0.3, 0.3333333333333333, 0.4, 0.3333333333333333, 0.3, 0.16666666666666666, 0.3333333333333333, 0.23333333333333334, 0.3, 0.3333333333333333, 0.3]


def one_shot_0x2(ax, format, label, graphType):
    transformation_prob = [ 0.33121383,  0.33355853,  0.33522755,  0.33209997,  0.33347341,
        0.33442655,  0.33483207,  0.33246198,  0.33270594,  0.33418369,
        0.3344675 ,  0.33134881,  0.3341924 ,  0.33449399,  0.33131358,
        0.33709863,  0.33115613,  0.33174521,  0.3333163 ,  0.33333543,
        0.33334824,  0.33221981,  0.33346593,  0.3343142 ,  0.33037671,
        0.33367267,  0.33595052,  0.33302876,  0.33248395,  0.33448729,
        0.3319715 ,  0.33263931,  0.33538917,  0.34506616,  0.32435226,
        0.33058161,  0.35063297,  0.32101926,  0.32834774,  0.37604168,
        0.30746508,  0.31649321,  0.36001799,  0.31743988,  0.32254222,
        0.36841524,  0.31298658,  0.31859818,  0.35381827,  0.32146552,
        0.32471615,  0.34612992,  0.32595116,  0.32791889,  0.34687576,
        0.32529047,  0.32783377,  0.34167093,  0.32708803,  0.33124095,
        0.3562001 ,  0.32021701,  0.32358295,  0.35381255,  0.32159701,
        0.32459047,  0.35322791,  0.32103208,  0.32573992,  0.34478936,
        0.32573858,  0.32947212,  0.3381274 ,  0.32997817,  0.33189446,
        0.33625543,  0.33128271,  0.33246189,  0.33720323,  0.3310748 ,
        0.33172193,  0.33644518,  0.33153301,  0.33202177,  0.33333331,
        0.33333331,  0.33333331,  0.33542421,  0.33211994,  0.33245581,
        0.34926969,  0.32422045,  0.32650986,  0.346921  ,  0.32556239,
        0.32751667,  0.35513484,  0.32088679,  0.32397836,  0.36989927,
        0.31249636,  0.31760427,  0.37678677,  0.30855677,  0.31465647,
        0.38876808,  0.30179793,  0.30943397,  0.39127472,  0.3003177 ,
        0.30840757,  0.37462226,  0.30969933,  0.31567845,  0.37455398,
        0.30972299,  0.31572306,  0.37323862,  0.31046119,  0.31630018,
        0.35737261,  0.31963345,  0.32299393,  0.36106834,  0.31749731,
        0.32143444,  0.3536604 ,  0.32167879,  0.32466075,  0.34595042,
        0.3261095 ,  0.32794005,  0.35720977,  0.31968132,  0.32310885,
        0.33552748,  0.33191714,  0.33255535,  0.33644292,  0.33137619,
        0.33218086,  0.34041697,  0.3285102 ,  0.33107284,  0.34055671,
        0.32880697,  0.33063623,  0.3342534 ,  0.33248821,  0.33325833,
        0.33050108,  0.3336345 ,  0.33586439,  0.33178556,  0.33351463,
        0.33469981,  0.33206007,  0.33348271,  0.33445719,  0.33202142,
        0.33348706,  0.33449146,  0.33162802,  0.33352903,  0.33484289,
        0.33075985,  0.33362952,  0.3356106 ,  0.33091027,  0.33360806,
        0.33548164,  0.33640394,  0.3305665 ,  0.33302957,  0.33621645,
        0.33018175,  0.33360174,  0.3285816 ,  0.333451  ,  0.33796737,
        0.32914743,  0.33315098,  0.33770162,  0.33358589,  0.3322508 ,
        0.33416325,  0.34215653,  0.32716799,  0.33067545,  0.33662847,
        0.33055842,  0.33281308,  0.33167419,  0.33339474,  0.33493099,
        0.33304307,  0.33202237,  0.33493444,  0.33702758,  0.33027318,
        0.33269921,  0.34415367,  0.32635498,  0.32949135,  0.34357688,
        0.32534677,  0.33107644,  0.34761012,  0.32312945,  0.32926038,
        0.33720648,  0.32958937,  0.33320421,  0.33105549,  0.33230254,
        0.33664197,  0.32947814,  0.33249316,  0.33802864,  0.31870931,
        0.33473915,  0.34655154,  0.3178964 ,  0.33477485,  0.34732878,
        0.3173331 ,  0.3349452 ,  0.34772176,  0.31185549,  0.33555368,
        0.35259089,  0.31518093,  0.33526182,  0.34955728,  0.31312254,
        0.33539781,  0.35147965,  0.31270853,  0.33540425,  0.35188723,
        0.31395575,  0.3353295 ,  0.35071468,  0.30999565,  0.33571848,
        0.35428587,  0.3120957 ,  0.33551753,  0.35238674,  0.30886015,
        0.33579722,  0.35534269,  0.30858463,  0.33574378,  0.35567158,
        0.31123969,  0.33554065,  0.35321972,  0.31483307,  0.33524558,
        0.34992141,  0.32141528,  0.33465835,  0.34392634,  0.31947142,
        0.33482495,  0.34570363,  0.3161394 ,  0.33517265,  0.34868786,
        0.31327921,  0.33542049,  0.35130024,  0.30880937,  0.33577526,
        0.3554154 ,  0.31523076,  0.33526096,  0.34950832,  0.31180552,
        0.33553809,  0.35265633,  0.31518847,  0.33524388,  0.34956759,
        0.31315958,  0.33542398,  0.35141638,  0.30765948,  0.33591503,
        0.35642549,  0.30422404,  0.33611283,  0.35966313,  0.30433765,
        0.335958  ,  0.35970432,  0.30979007,  0.33558896,  0.35462096,
        0.31163815,  0.33547816,  0.35288373,  0.30878258,  0.3357608 ,
        0.35545662,  0.30672401,  0.33598572,  0.35729018,  0.3087483 ,
        0.33582532,  0.35542637,  0.30972984,  0.33574855,  0.35452163,
        0.30994341,  0.33570021,  0.35435641,  0.31276485,  0.33546752,
        0.3517676 ,  0.31148055,  0.33560142,  0.35291806,  0.31083515,
        0.33567908,  0.35348579,  0.3113797 ,  0.33564201,  0.35297829,
        0.31025988,  0.33573091,  0.35400918,  0.31321138,  0.33541018,
        0.35137844,  0.31283644,  0.33549392,  0.35166967,  0.31390202,
        0.33540767,  0.35069031,  0.31757948,  0.33505267,  0.34736785,
        0.31732795,  0.3350741 ,  0.3475979 ,  0.31579477,  0.33518299,
        0.34902227,  0.31111124,  0.33562347,  0.35326535,  0.30806506,
        0.3359099 ,  0.35602504,  0.30484962,  0.33617896,  0.35897133,
        0.30198374,  0.33638099,  0.36163521,  0.30675858,  0.33602723,
        0.35721412,  0.30697951,  0.33598992,  0.35703069,  0.30280977,
        0.33630151,  0.36088878,  0.30303389,  0.33630323,  0.36066288,
        0.30603829,  0.33541706,  0.35854471,  0.30100924,  0.33644599,
        0.36254469,  0.30521983,  0.33607462,  0.35870546,  0.30172303,
        0.33640346,  0.36187354,  0.30232701,  0.3363601 ,  0.3613129 ,
        0.30776638,  0.33588114,  0.35635242]
    res = [30, 47.062500000000007, 50.654999999999994, 66.920000000000002, 76.012500000000003, 92.41749999999999, 102.86749999999999, 110.2225, 116.1375, 127.9725, 128.13249999999999, 137.75500000000002, 147.815, 152.4725, 152.30499999999998, 153.20999999999998, 150.84750000000003, 163.17250000000001, 166.01499999999999, 169.19750000000002, 170.535, 167.15000000000001, 169.80500000000001, 169.41, 174.86500000000004, 170.33249999999998, 174.44499999999999, 176.13749999999999, 175.095, 178.95250000000001, 182.02250000000001, 181.75, 185.2825, 181.41999999999999, 179.53749999999999, 183.57999999999998, 185.14749999999998, 189.80500000000001, 186.97, 190.24499999999998, 188.51000000000002, 188.55500000000001, 191.4675, 191.57999999999998, 191.13749999999999, 187.71250000000001, 189.66, 189.70500000000001, 190.3125, 190.7825, 188.09999999999999, 189.42750000000001, 193.4425, 190.92249999999999, 189.83750000000001, 188.16, 192.07249999999999, 191.33500000000001, 196.02000000000001, 194.62, 194.22750000000002, 194.05000000000001, 194.57499999999999, 193.48250000000002, 192.91249999999997, 196.05500000000001, 194.62, 192.315, 193.35750000000002, 193.88749999999999, 193.61000000000001, 195.76499999999999, 195.66249999999999, 194.82750000000004, 195.1275, 197.21250000000001, 197.26249999999999, 196.89749999999998, 197.55249999999998, 196.88249999999999, 197.21250000000001, 198.01499999999999, 197.75999999999999, 198.3725, 196.845, 198.13499999999996, 196.59250000000003, 198.20499999999998, 196.81250000000003, 197.16749999999999, 198.00749999999999, 198.70499999999998, 198.84999999999999, 198.30749999999998, 198.40500000000003, 198.15249999999997, 198.64250000000001, 198.88749999999999, 198.81, 197.88499999999996, 198.73500000000001, 196.0925, 197.9025, 198.22750000000002, 198.79500000000002, 198.45750000000004, 198.77000000000001, 198.19, 198.77249999999998, 198.22749999999999, 198.69749999999996, 198.63, 198.96750000000003, 197.79750000000001, 198.82750000000001, 198.35000000000002, 199.23750000000001, 198.905, 197.82499999999999, 197.42499999999998, 198.60499999999999, 198.4075, 198.86999999999998, 198.50500000000002, 198.33750000000001, 198.80250000000001, 199.01000000000002, 199.42250000000001, 198.61750000000001, 198.69499999999999, 197.81249999999997, 199.22250000000003]
    print len(res)
    improvement = [0.24999999999999997, 0.16499999999999998, 0.40500000000000008, 0.20499999999999999, 0.12999999999999998, 0.094999999999999987, 0.089999999999999983, 0.089999999999999941, 0.029999999999999995, 0.094999999999999959, 0.11499999999999999, 0.19, 0.050000000000000003, 0.14499999999999999, 0.039999999999999994, -0.08500000000000002, 0.12999999999999998, 0.29499999999999998, 0.060000000000000019, 0.16499999999999998, 0.13499999999999995, 0.024999999999999991, 0.055000000000000007, 0.019999999999999987, 0.13499999999999998, 0.094999999999999973, 0.14500000000000002, -0.035000000000000017, 0.039999999999999994, -0.080000000000000016, 0.0049999999999999932, -0.010000000000000007, 0.049999999999999982, 0.020000000000000004, 0.094999999999999987, 0.090000000000000011, 0.13, -0.12000000000000002, 0.049999999999999982, 0.23499999999999999, 0.13999999999999999, 0.025000000000000015, 0.18000000000000002, 0.0050000000000000079, 0.0049999999999999897, -0.11000000000000003, 0.0049999999999999932, 0.13499999999999998, 9.2518585385429707e-18, -0.035000000000000003, -0.02, 0.005000000000000001, -0.029999999999999988, -0.14500000000000002, 0.044999999999999978, 0.050000000000000017, -0.10500000000000002, -0.075000000000000011, -0.020000000000000004, -0.055000000000000007, -0.030000000000000013, 0.079999999999999988, 0.10499999999999998, -0.10000000000000003, -0.010000000000000005, 0.059999999999999977, -0.0050000000000000044, -0.060000000000000019, 0.059999999999999984, -0.059999999999999991, -0.070000000000000021, -0.020000000000000011, 0.084999999999999992, 0.040000000000000008, -0.010000000000000005, 0.084999999999999992, 0.19499999999999998, 0.090000000000000024, 0.080000000000000016, 0.075000000000000011, 0.29999999999999999, 0.23999999999999996, 0.059999999999999984, 0.019999999999999997, 0.094999999999999987, 0.22999999999999998, 0.095000000000000015, -0.0099999999999999985, 0.18000000000000002, 0.22499999999999998, 0.16, 0.125, -0.074999999999999997, 0.23499999999999999, -0.0099999999999999967, 0.16500000000000001, 0.20999999999999999, 0.12000000000000002, 0.059999999999999984, 0.13, -0.05000000000000001, 0.115, -0.0049999999999999992, 0.11999999999999995, -0.030000000000000006, 0.090000000000000011, -0.084999999999999992, 0.039999999999999994, 0.034999999999999996, 0.024999999999999991, 0.25999999999999995, 0.15499999999999997, 0.20000000000000001, 0.059999999999999991, -0.040000000000000008, 0.27499999999999997, 0.10499999999999998, 0.059999999999999963, 0.0099999999999999985, 0.070000000000000021, 0.060000000000000032, -0.029999999999999995, 0.089999999999999983, -0.15500000000000005, 0.090000000000000011, 0.090000000000000024, 0.37500000000000006, -0.065000000000000002, 0.20500000000000002, -0.095000000000000015, 0.12499999999999999]
    time = [11.193352937698364, 22.84380006790161, 34.93178391456604, 47.53280210494995, 60.73013710975647, 74.23809504508972, 88.06173205375671, 102.28415298461914, 116.93811011314392, 131.5780029296875, 146.6807301044464, 162.23678302764893, 178.28555703163147, 194.4717400074005, 210.38679909706116, 226.70020699501038, 243.26287293434143, 260.050763130188, 276.52275705337524, 293.0950400829315, 309.50350308418274, 325.87971901893616, 341.95731711387634, 358.3000259399414, 375.11797308921814, 391.68537306785583, 408.63679909706116, 424.6158699989319, 441.2623679637909, 457.4187788963318, 473.97870993614197, 490.8494279384613, 507.8835029602051, 524.9980390071869, 542.9105179309845, 561.2804870605469, 579.0245990753174, 596.325532913208, 614.3012969493866, 631.9026811122894, 649.5097279548645, 667.0467660427094, 684.6166100502014, 701.6112089157104, 718.9944200515747, 736.5300490856171, 753.7021470069885, 771.600291967392, 789.0168380737305, 806.0654590129852, 823.0897810459137, 840.995579957962, 858.6774179935455, 875.9112648963928, 893.302237033844, 910.8957190513611, 928.3763039112091, 945.8454461097717, 962.9735751152039, 980.6101279258728, 998.2440209388733, 1016.0800020694733, 1034.1929919719696, 1051.64555311203, 1069.6345880031586, 1087.7321541309357, 1105.2634980678558, 1122.9580700397491, 1140.9281380176544, 1158.8344960212708, 1177.200304031372, 1194.9664089679718, 1213.0592079162598, 1230.984612941742, 1249.1168539524078, 1267.0472159385681, 1285.6290431022644, 1303.8378269672394, 1322.0163979530334, 1340.1924741268158, 1359.119071006775, 1377.6268219947815, 1396.2185299396515, 1414.3643090724945, 1433.0044779777527, 1451.4577150344849, 1469.8143310546875, 1487.709235906601, 1506.3955681324005, 1525.1638009548187, 1543.7357840538025, 1562.4829800128937, 1580.969782114029, 1599.4555060863495, 1618.338133096695, 1636.752541065216, 1655.5737640857697, 1674.1441349983215, 1692.7100129127502, 1711.3801851272583, 1729.8839209079742, 1748.6067550182343, 1766.9127810001373, 1785.4350769519806, 1804.0756859779358, 1822.6356410980225, 1841.08953499794, 1859.3372840881348, 1877.8726079463959, 1896.518485069275, 1915.0422389507294, 1933.596981048584, 1951.8511250019073, 1969.8916330337524, 1988.4330279827118, 2007.1969239711761, 2025.9577660560608, 2044.1688199043274, 2062.4340600967407, 2081.045319080353, 2099.847536087036, 2118.5990929603577, 2137.1567239761353, 2155.618089914322, 2174.071238040924, 2192.5252089500427, 2211.4360909461975, 2229.518898010254, 2248.466048002243, 2266.967349052429, 2285.8056828975677]
    print np.array(improvement).mean(0)
    if graphType == 0:
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp)/3, 3]))
        ax.plot(trpt[0,0:51], '--', label=label+'-mutation-prob')
        ax.plot(trpt[1,0:51], '-.', label=label+'-crossover-prob')
        ax.plot(trpt[2,0:51], ':', label=label+'-explore-prob')
    elif graphType == 1:
        ax.plot(res[0:51], format, label=label)
    else:
        ax.plot(improvement, format, label=label)

def one_shot_1(ax, format, label, graphType):
    transformation_prob = [ 0.32981807,  0.31527805,  0.35490385,  0.31503049,  0.33052254,
        0.35444704,  0.32348782,  0.33425769,  0.34225443,  0.34121808,
        0.33718666,  0.32159525,  0.34907517,  0.32616633,  0.32475844,
        0.34193894,  0.32929575,  0.32876533,  0.3288658 ,  0.33769256,
        0.3334417 ,  0.32204235,  0.35237253,  0.3255851 ,  0.34416497,
        0.32855618,  0.32727882,  0.34941691,  0.33195093,  0.31863213,
        0.32226753,  0.36218706,  0.31554541,  0.31113401,  0.37573117,
        0.31313479,  0.32208443,  0.36179975,  0.31611592,  0.33518493,
        0.35069573,  0.31411937,  0.31808206,  0.36320162,  0.31871626,
        0.32367745,  0.35844797,  0.31787461,  0.33448276,  0.34566516,
        0.31985205,  0.34063119,  0.34099987,  0.31836903,  0.34420291,
        0.33334878,  0.32244837,  0.34136933,  0.34330812,  0.31532252,
        0.34371778,  0.33248347,  0.32379878,  0.3462227 ,  0.33228126,
        0.32149601,  0.34352934,  0.33422402,  0.3222467 ,  0.34470877,
        0.33333927,  0.32195196,  0.32661363,  0.35231462,  0.32107165,
        0.34106472,  0.33491296,  0.32402235,  0.33997223,  0.3366527 ,
        0.32337508,  0.32486257,  0.35821912,  0.31691831,  0.31564361,
        0.36828139,  0.31607491,  0.29416314,  0.39351401,  0.31232288,
        0.30309162,  0.38125905,  0.31564933,  0.30862433,  0.37605768,
        0.31531802,  0.3237243 ,  0.35907474,  0.31720096,  0.32929695,
        0.3484692 ,  0.32223383,  0.33232218,  0.34773022,  0.3199476 ,
        0.32234493,  0.3620196 ,  0.31563553,  0.32684028,  0.35514686,
        0.31801292,  0.32143974,  0.35679105,  0.32176921,  0.3204599 ,
        0.35850847,  0.32103169,  0.30981535,  0.36670408,  0.32348058,
        0.30698153,  0.3734479 ,  0.31957057,  0.28402886,  0.3995083 ,
        0.31646296,  0.24273251,  0.45263541,  0.30463207,  0.23534831,
        0.46024734,  0.30440432,  0.23060627,  0.46102113,  0.30837262,
        0.22827007,  0.46184385,  0.30988613,  0.23401077,  0.45642772,
        0.30956146,  0.24060015,  0.44551936,  0.31388044,  0.25408882,
        0.43244407,  0.31346717,  0.2148957 ,  0.47852528,  0.30657899,
        0.20228769,  0.49971074,  0.29800162,  0.22195223,  0.4735935 ,
        0.30445424,  0.19584776,  0.50609696,  0.29805535,  0.19448923,
        0.51360542,  0.29190537,  0.17729644,  0.53584027,  0.28686327,
        0.1872904 ,  0.5212341 ,  0.29147547,  0.18779214,  0.51828825,
        0.29391965,  0.17499353,  0.5355432 ,  0.28946319,  0.19088951,
        0.50983441,  0.29927614,  0.19434111,  0.50298458,  0.30267438,
        0.18972874,  0.51263064,  0.29764062,  0.18062261,  0.52610534,
        0.29327202,  0.20618413,  0.49158341,  0.30223241,  0.19782563,
        0.49991611,  0.30225828,  0.19887003,  0.50323927,  0.29789063,
        0.21570851,  0.48313946,  0.30115202,  0.22292241,  0.46960717,
        0.30747038,  0.24223813,  0.4404282 ,  0.3173337 ,  0.26281375,
        0.41566452,  0.32152179,  0.27277258,  0.40399987,  0.32322758,
        0.25614408,  0.42534131,  0.31851465,  0.244939  ,  0.43669766,
        0.31836334,  0.22932081,  0.45483419,  0.31584507,  0.23316912,
        0.45133385,  0.31549701,  0.24475011,  0.43846503,  0.31678483,
        0.25487185,  0.42604363,  0.31908453,  0.23395954,  0.45085993,
        0.31518051,  0.23026891,  0.45634967,  0.3133814 ,  0.25126401,
        0.42904875,  0.31968725,  0.23875856,  0.4447661 ,  0.31647536,
        0.24833246,  0.43281078,  0.31885675,  0.27094814,  0.40444073,
        0.3246111 ,  0.25288203,  0.42863104,  0.31848699,  0.2482654 ,
        0.43260592,  0.31912869,  0.24388447,  0.43957204,  0.31654346,
        0.24726844,  0.4347223 ,  0.31800926,  0.2371583 ,  0.44856569,
        0.31427607,  0.22842589,  0.46083954,  0.31073457,  0.21455203,
        0.48306486,  0.30238298,  0.22664861,  0.46477696,  0.30857438,
        0.24797289,  0.42994291,  0.32208416,  0.26458246,  0.41215101,
        0.32326654,  0.22110026,  0.46551248,  0.31338727,  0.24364822,
        0.43849167,  0.31786013,  0.23575372,  0.4486891 ,  0.31555718,
        0.26755941,  0.40626487,  0.32617569,  0.24165893,  0.43098035,
        0.32736069,  0.2825858 ,  0.38383529,  0.33357888,  0.27067459,
        0.40435162,  0.32497379,  0.28163081,  0.39470103,  0.32366815,
        0.26386783,  0.41384888,  0.32228333,  0.25026953,  0.43061569,
        0.31911471,  0.22426638,  0.46515101,  0.31058258,  0.24091886,
        0.4408358 ,  0.31824532,  0.21177053,  0.47929487,  0.30893451,
        0.19834971,  0.49603558,  0.30561477,  0.19523391,  0.49656215,
        0.30820397,  0.1931542 ,  0.50228274,  0.30456302,  0.19470736,
        0.50056255,  0.30473015]
    res = [30, 46.622499999999995, 55.660000000000004, 73.97999999999999, 78.125, 80.347500000000011, 87.469999999999999, 92.030000000000001, 93.837500000000006, 94.862500000000011, 99.66749999999999, 101.75750000000001, 103.33750000000001, 100.6225, 104.63999999999999, 103.8175, 109.83500000000001, 104.29750000000001, 107.8475, 105.52249999999999, 110.345, 109.4675, 111.4325, 116.5675, 118.01500000000001, 118.8125, 127.02749999999999, 136.25, 144.20999999999998, 143.15500000000003, 142.01750000000001, 145.33250000000001, 146.34250000000003, 150.74250000000001, 149.57750000000001, 154.97999999999999, 154.9325, 157.26250000000002, 153.34250000000003, 160.20749999999998, 157.70999999999998, 160.21499999999997, 156.21250000000001, 155.72, 159.13749999999999, 160.35999999999999, 162.63499999999996, 161.78, 157.1825, 159.05749999999998, 162.41, 160.41, 159.45249999999999, 162.63499999999999, 167.46750000000003, 163.11250000000001, 166.60250000000002, 166.32249999999999, 162.81249999999997, 165.815, 168.85750000000002, 167.41500000000002, 169.65249999999997, 168.08250000000001, 165.32250000000002, 168.64749999999998, 164.7525, 164.19499999999999, 165.08249999999998, 165.14000000000001, 166.1525, 166.88999999999999, 170.52500000000003, 166.5575, 168.03249999999997, 166.42249999999999, 166.83999999999997, 169.60500000000002, 166.16749999999999, 171.44750000000002, 167.85999999999999, 172.1825, 170.66000000000003, 172.63249999999999, 170.215, 172.9975, 174.17999999999998, 173.29000000000002, 177.13249999999999, 181.4975, 180.45750000000001, 182.375, 179.4325, 183.495, 184.51499999999999, 179.19, 180.47, 183.91000000000003, 185.10749999999999, 184.52749999999997, 187.75749999999999, 185.76500000000001, 188.51749999999998, 187.78500000000003, 186.10250000000002, 188.95999999999998, 188.29250000000002, 188.38499999999999, 191.10250000000002, 188.42000000000002]
    print len(res)
    improvement = [0.215, -0.3116666666666667, -0.21666666666666665, -0.35666666666666669, -0.28666666666666674, -0.15333333333333335, -0.58166666666666667, -0.24833333333333332, -0.21666666666666667, -0.18499999999999997, -0.38500000000000001, -0.21333333333333332, -0.28000000000000003, -0.04166666666666665, -0.40666666666666662, -0.15333333333333332, -0.44833333333333331, 0.094999999999999987, -0.37833333333333335, -0.31166666666666665, -0.41333333333333333, -0.21333333333333332, -0.33999999999999997, -0.24499999999999997, -0.34666666666666668, -0.48333333333333334, -0.45166666666666672, -0.25166666666666665, -0.3116666666666667, -0.3116666666666667, -0.044999999999999964, -0.0066666666666666723, -0.6166666666666667, -0.47999999999999993, -0.22666666666666663, 0.015000000000000001, -0.18166666666666667, -0.25166666666666665, -0.21666666666666665, -0.083333333333333329, -0.24833333333333327, -0.24499999999999997, -0.27999999999999997, -0.34666666666666668, -0.18166666666666664, -0.11166666666666665, -0.01666666666666668, -0.32833333333333337, -0.010000000000000024, -0.55000000000000004, -0.10833333333333331, 0.050000000000000003, -0.11166666666666665, 0.11999999999999998, -0.28333333333333333, -0.18166666666666664, -0.20666666666666667, 0.14499999999999999, -0.041666666666666678, -0.051666666666666666, -0.083333333333333329, 0.12333333333333334, -0.24499999999999997, -0.079999999999999988, -0.255, -0.34333333333333338, -0.42000000000000004, -0.21666666666666665, -0.24833333333333332, -0.17833333333333332, -0.020000000000000011, 0.018333333333333313, -0.21666666666666665, -0.18499999999999997, -0.15333333333333332, 0.085000000000000006, -0.21666666666666665, -0.24166666666666664, -0.28666666666666668, -0.38500000000000001, -0.32500000000000001, -0.23833333333333331, -0.38166666666666671, -0.28333333333333333, -0.15333333333333329, -0.079999999999999988, -0.14666666666666664, -0.11833333333333333, -0.14333333333333334, -0.47666666666666668, 0.050000000000000017, -0.048333333333333339, -0.28333333333333338, -0.25166666666666665, -0.31833333333333336, -0.083333333333333329, -0.51500000000000012, -0.5083333333333333, -0.47999999999999993, -0.47666666666666668, -0.023333333333333338, -0.35333333333333339, -0.41000000000000003, -0.38166666666666665, -0.24833333333333335, -0.016666666666666666, -0.27666666666666667, -0.11166666666666665, -0.42333333333333339]
    time = [11.667655944824219, 23.649890899658203, 36.9192099571228, 51.32353091239929, 65.72741889953613, 81.22551488876343, 96.10557103157043, 111.42410087585449, 126.95423793792725, 142.56181693077087, 157.95252394676208, 173.52038407325745, 188.9525249004364, 204.74856400489807, 220.2577109336853, 236.01540207862854, 251.315083026886, 266.95515489578247, 282.76334404945374, 298.5533468723297, 314.2937560081482, 330.1527121067047, 346.8969349861145, 363.57566690444946, 380.6240758895874, 397.3886630535126, 415.06126403808594, 433.57188510894775, 451.1295189857483, 467.8697919845581, 484.8209249973297, 502.2311489582062, 518.5971870422363, 534.6644098758698, 550.9688611030579, 566.8236389160156, 583.4956519603729, 600.0409550666809, 616.7316029071808, 632.9324870109558, 648.8543310165405, 665.0601420402527, 681.2994999885559, 697.8748970031738, 714.6687788963318, 731.5011661052704, 748.1582589149475, 764.4640169143677, 781.3763089179993, 798.376550912857, 815.7200419902802, 832.1864130496979, 849.0894989967346, 865.5500659942627, 882.3960320949554, 899.4061570167542, 917.1937348842621, 934.7229180335999, 952.079029083252, 969.3252909183502, 986.325649023056, 1003.4379708766937, 1020.4601030349731, 1037.46972990036, 1054.2158319950104, 1071.1300559043884, 1088.2859899997711, 1105.3852860927582, 1122.1201040744781, 1138.9481101036072, 1155.8361818790436, 1172.9642119407654, 1189.9833059310913, 1206.6014819145203, 1223.4096310138702, 1240.5263760089874, 1257.3413689136505, 1274.1757259368896, 1291.336086988449, 1308.6914329528809, 1325.2767040729523, 1341.9831249713898, 1359.2306768894196, 1376.010740995407, 1393.1201899051666, 1409.954761981964, 1427.4162058830261, 1444.3466498851776, 1462.0097379684448, 1479.6019959449768, 1497.2067890167236, 1514.8546130657196, 1532.5043399333954, 1550.1905159950256, 1567.872878074646, 1585.3902568817139, 1603.2192459106445, 1620.8105690479279, 1638.5101931095123, 1656.080239057541, 1673.6916809082031, 1691.6845231056213, 1709.6362869739532, 1727.524472951889, 1745.5257229804993, 1765.6118440628052, 1783.6869759559631, 1801.9811010360718, 1821.8126480579376]
    print np.array(improvement).mean(0)
    if graphType == 0:
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp) / 3, 3]))
        ax.plot(trpt[0, 0:51], '--', label=label + '-mutation-prob')
        ax.plot(trpt[1, 0:51], '-.', label=label + '-crossover-prob')
        ax.plot(trpt[2, 0:51], ':', label=label + '-explore-prob')
    elif graphType == 1:
        ax.plot(res[0:51], format, label=label)
    else:
        ax.plot(improvement, format, label=label)

def one_shot_0x1(ax, format, label, graphType):
    transformation_prob = [ 0.68918633,  0.21777354,  0.09304015,  0.64628357,  0.24839386,
        0.10532258,  0.61932331,  0.26305115,  0.11762559,  0.62651283,
        0.25789991,  0.11558719,  0.62680966,  0.25270966,  0.12048072,
        0.60455787,  0.26524225,  0.13019983,  0.60859573,  0.26402912,
        0.12737511,  0.59599173,  0.26304296,  0.14096539,  0.60323983,
        0.26947781,  0.12728228,  0.61357003,  0.25931996,  0.12711002,
        0.62378323,  0.25653028,  0.11968647,  0.6187374 ,  0.25090382,
        0.13035884,  0.60314733,  0.25701755,  0.13983503,  0.60964131,
        0.26184466,  0.12851402,  0.6277532 ,  0.26304904,  0.10919771,
        0.58161521,  0.27754271,  0.14084205,  0.55210763,  0.3013458 ,
        0.14654657,  0.52216655,  0.31404585,  0.1637876 ,  0.52842861,
        0.31180307,  0.15976831,  0.52934265,  0.31261903,  0.15803832,
        0.51077241,  0.31558257,  0.17364499,  0.47535372,  0.318005  ,
        0.20664123,  0.47484961,  0.31486437,  0.21028604,  0.48363659,
        0.30775055,  0.20861283,  0.46978298,  0.30998036,  0.22023667,
        0.44984171,  0.31795272,  0.23220555,  0.41770089,  0.31709531,
        0.26520383,  0.38693106,  0.32808813,  0.28498083,  0.38611975,
        0.33221513,  0.28166515,  0.39092952,  0.33158991,  0.27748051,
        0.39093482,  0.33220762,  0.2768575 ,  0.40035158,  0.33408949,
        0.26555893,  0.41233048,  0.33223534,  0.25543422,  0.40629044,
        0.33347258,  0.26023704,  0.4173626 ,  0.33343157,  0.24920589,
        0.43469033,  0.32947683,  0.23583274,  0.42942986,  0.32993394,
        0.24063626,  0.44131359,  0.32907525,  0.2296112 ,  0.42407486,
        0.33234432,  0.2435808 ,  0.41088483,  0.33165419,  0.25746095,
        0.44219178,  0.30853638,  0.24927184,  0.43780258,  0.3104901 ,
        0.25170738,  0.42948848,  0.31077009,  0.25974143,  0.44632646,
        0.31126279,  0.24241072,  0.45895195,  0.3073428 ,  0.23370521,
        0.45649323,  0.29846174,  0.24504511,  0.4398371 ,  0.30083212,
        0.25933072,  0.41648197,  0.32241958,  0.26109853,  0.39872858,
        0.33148399,  0.26978743,  0.39562619,  0.33177328,  0.27260056,
        0.3953144 ,  0.33238742,  0.27229813,  0.3868472 ,  0.33229768,
        0.28085518,  0.39832416,  0.33338144,  0.26829442,  0.39214024,
        0.33614406,  0.2717157 ]
    res = [30, 42.232500000000002, 54.644999999999996, 56.087499999999999, 58.304999999999993, 64.147500000000008, 67.739999999999995, 67.819999999999993, 78.267500000000013, 91.887500000000003, 103.97, 108.45999999999999, 114.83250000000001, 123.91749999999999, 126.45500000000001, 127.9675, 133.57750000000001, 137.57499999999999, 142.285, 150.52500000000001, 148.41, 158.00500000000002, 165.16749999999999, 171.04000000000002, 170.29750000000001, 172.29250000000002, 170.8725, 174.96250000000001, 177.43249999999998, 177.095, 177.27999999999997, 178.13999999999999, 181.0575, 177.61750000000001, 178.30749999999998, 182.66250000000002, 183.60999999999999, 185.28500000000003, 187.33999999999997, 186.79750000000001, 185.86750000000001, 189.29249999999999, 188.95250000000001, 186.25749999999999, 189.7475, 190.91000000000003, 191.07000000000002, 191.5025, 190.19, 189.53749999999999, 192.77000000000001, 191.77250000000001, 193.39749999999998, 193.34999999999999, 195.19750000000002]
    print len(res)
    improvement = [11.593425989151001, 23.65981411933899, 35.988102197647095, 48.46546912193298, 61.22116208076477, 73.89094805717468, 86.69988203048706, 99.9800910949707, 113.85422110557556, 127.99670314788818, 142.7684772014618, 158.19539618492126, 173.69326901435852, 189.27423119544983, 204.71890020370483, 220.80079412460327, 236.7004361152649, 253.0402500629425, 269.8023691177368, 286.08068799972534, 303.28307008743286, 321.3126640319824, 339.0040340423584, 356.54549503326416, 374.09331607818604, 391.53022718429565, 409.70210003852844, 428.12164402008057, 446.58235716819763, 464.8539950847626, 483.04117608070374, 502.3056540489197, 519.9976181983948, 537.1767141819, 555.0323991775513, 573.1572141647339, 591.4383571147919, 610.1803650856018, 628.2251510620117, 645.4692451953888, 664.3412501811981, 682.7834780216217, 700.9082281589508, 719.0821311473846, 738.7281770706177, 757.577085018158, 777.7690742015839, 796.5908241271973, 815.3570091724396, 833.4220020771027, 852.1667771339417, 870.5798850059509, 889.1458871364594, 908.9876291751862]
    time = [11.667655944824219, 23.649890899658203, 36.9192099571228, 51.32353091239929, 65.72741889953613, 81.22551488876343, 96.10557103157043, 111.42410087585449, 126.95423793792725, 142.56181693077087, 157.95252394676208, 173.52038407325745, 188.9525249004364, 204.74856400489807, 220.2577109336853, 236.01540207862854, 251.315083026886, 266.95515489578247, 282.76334404945374, 298.5533468723297, 314.2937560081482, 330.1527121067047, 346.8969349861145, 363.57566690444946, 380.6240758895874, 397.3886630535126, 415.06126403808594, 433.57188510894775, 451.1295189857483, 467.8697919845581, 484.8209249973297, 502.2311489582062, 518.5971870422363, 534.6644098758698, 550.9688611030579, 566.8236389160156, 583.4956519603729, 600.0409550666809, 616.7316029071808, 632.9324870109558, 648.8543310165405, 665.0601420402527, 681.2994999885559, 697.8748970031738, 714.6687788963318, 731.5011661052704, 748.1582589149475, 764.4640169143677, 781.3763089179993, 798.376550912857, 815.7200419902802, 832.1864130496979, 849.0894989967346, 865.5500659942627, 882.3960320949554, 899.4061570167542, 917.1937348842621, 934.7229180335999, 952.079029083252, 969.3252909183502, 986.325649023056, 1003.4379708766937, 1020.4601030349731, 1037.46972990036, 1054.2158319950104, 1071.1300559043884, 1088.2859899997711, 1105.3852860927582, 1122.1201040744781, 1138.9481101036072, 1155.8361818790436, 1172.9642119407654, 1189.9833059310913, 1206.6014819145203, 1223.4096310138702, 1240.5263760089874, 1257.3413689136505, 1274.1757259368896, 1291.336086988449, 1308.6914329528809, 1325.2767040729523, 1341.9831249713898, 1359.2306768894196, 1376.010740995407, 1393.1201899051666, 1409.954761981964, 1427.4162058830261, 1444.3466498851776, 1462.0097379684448, 1479.6019959449768, 1497.2067890167236, 1514.8546130657196, 1532.5043399333954, 1550.1905159950256, 1567.872878074646, 1585.3902568817139, 1603.2192459106445, 1620.8105690479279, 1638.5101931095123, 1656.080239057541, 1673.6916809082031, 1691.6845231056213, 1709.6362869739532, 1727.524472951889, 1745.5257229804993, 1765.6118440628052, 1783.6869759559631, 1801.9811010360718, 1821.8126480579376]
    print np.array(improvement).mean(0)
    if graphType == 0:
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp) / 3, 3]))
        ax.plot(trpt[0, 0:51], '--', label=label + '-mutation-prob')
        ax.plot(trpt[1, 0:51], '-.', label=label + '-crossover-prob')
        ax.plot(trpt[2, 0:51], ':', label=label + '-explore-prob')
    elif graphType == 1:
        ax.plot(res[0:51], format, label=label)
    elif graphType==5 :
        trp = np.array(transformation_prob)
        trpt = np.transpose(np.reshape(trp, [len(trp) / 3, 3]))
        ax.plot(trpt[0, 0:51]*200, '--', label=label + '-mutation-prob')
        ax.plot(trpt[1, 0:51]*200, '-.', label=label + '-crossover-prob')
        ax.plot(trpt[2, 0:51]*200, ':', label=label + '-explore-prob')
        ax.plot(res[0:51], format, label=label)
    else:
        ax.plot(improvement, format, label=label)

def compare_loss_functions():
    fig, ax = plt.subplots()
    # one_shot_0x1(ax, 'k', 'r=-0.1', 1)
    one_shot_1(ax, 'k--', 'r=-1', 0)
    # one_shot_0x1(ax, 'k:', 'r=-0.1', 0)
    # ax.plot(new_data_with_half_pure_ga_tranc, 'k', label='[0.5, 0.5] probabilities')
    # ax.plot(genetic_only_mutation, 'k--', label='only mutation')
    # ax.plot(genetic_only_crossover, 'k:', label='only crossover')
    # ax.set_title('Genetic algorithm with [0.5,0.5] probabilities')
    ax.set_xlabel('Generation')
    ax.set_ylabel('Probability')
    legend = ax.legend(loc='upper left', shadow=True)  # , fontsize='x-large')
    plt.show()

compare_loss_functions()